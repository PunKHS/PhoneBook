DROP TABLE IF EXISTS LNK;
DROP TABLE IF EXISTS PROFESSION;
DROP TABLE IF EXISTS EMPLOYEES;
DROP TABLE IF EXISTS DEPARTMENT;


--DEPARTMENT TABLE
CREATE TABLE IF NOT EXISTS DEPARTMENT (
    ID INT GENERATED BY DEFAULT AS IDENTITY (START WITH 100, INCREMENT BY 1) NOT NULL,
    NAME VARCHAR(200),
    HEAD INT,
	PRIMARY KEY (ID)
);

--EMPLOYEE TABLE
CREATE TABLE IF NOT EXISTS EMPLOYEE(
	ID INT GENERATED BY DEFAULT AS IDENTITY (START WITH 100, INCREMENT BY 1) NOT NULL,
    NAME VARCHAR(200),
	PRIMARY KEY (ID)
);

--PROFESSION TABLE
CREATE TABLE IF NOT EXISTS PROFESSION (
	ID INT GENERATED BY DEFAULT AS IDENTITY (START WITH 100, INCREMENT BY 1) NOT NULL,
    NAME VARCHAR(200),
    PRIMARY KEY (ID)
);

--LNK TABLE
CREATE TABLE IF NOT EXISTS LNK (
	ID INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
    EMPLOYEE_ID    INTEGER,
    PROFESSION_ID  INTEGER,
    DEPARTMENT_ID  INTEGER,
    PRIMARY KEY (ID)
);
	
--FOREING KEYS
ALTER TABLE DEPARTMENT ADD CONSTRAINT FK_DEPARTMENT_HEAD FOREIGN KEY (HEAD) REFERENCES DEPARTMENT (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE LNK ADD CONSTRAINT FK_LNK_EMPLOYEE FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE LNK ADD CONSTRAINT FK_LNK_PROFESSION FOREIGN KEY (PROFESSION_ID) REFERENCES PROFESSION (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE LNK ADD CONSTRAINT FK_LNK_DEPARTMENT FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (ID) ON DELETE CASCADE ON UPDATE CASCADE;